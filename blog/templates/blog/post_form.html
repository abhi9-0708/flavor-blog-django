{% extends 'base.html' %}
{% load static %}
{% block title %}{% if form.instance.pk %}Edit Post{% else %}New Post{% endif %} â€” Flavor Blog{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto">
  <div class="bg-white dark:bg-gray-900 rounded-2xl border border-gray-100 dark:border-gray-800 overflow-hidden">
    <!-- Header -->
    <div class="px-8 pt-8 pb-4">
      <div class="flex items-center gap-3 mb-2">
        <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-brand-500 to-purple-600 flex items-center justify-center">
          {% if form.instance.pk %}
          <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M21.731 2.269a2.625 2.625 0 00-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 000-3.712zM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 00-1.32 2.214l-.8 2.685a.75.75 0 00.933.933l2.685-.8a5.25 5.25 0 002.214-1.32L19.513 8.2z"/></svg>
          {% else %}
          <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z" clip-rule="evenodd"/></svg>
          {% endif %}
        </div>
        <div>
          <h1 class="text-2xl font-bold text-gray-900 dark:text-white">
            {% if form.instance.pk %}Edit Post{% else %}Create New Post{% endif %}
          </h1>
          <p class="text-sm text-gray-500 dark:text-gray-400">Share your thoughts with the world.</p>
        </div>
      </div>
    </div>

    <!-- Form -->
    <form method="post" enctype="multipart/form-data" class="px-8 pb-8 space-y-5">
      {% csrf_token %}

      {% for field in form %}
      <div>
        <label for="{{ field.id_for_label }}" class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">
          {{ field.label }}
          {% if field.field.required %}<span class="text-red-400 ml-0.5">*</span>{% endif %}
        </label>
        {{ field }}
        {% if field.help_text %}
        <p class="mt-1.5 text-xs text-gray-400">{{ field.help_text }}</p>
        {% endif %}
        {% if field.errors %}
        <p class="mt-1.5 flex items-center gap-1 text-sm text-red-500">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z" clip-rule="evenodd"/></svg>
          {{ field.errors|striptags }}
        </p>
        {% endif %}
      </div>
      {% endfor %}

      <div class="pt-4 flex flex-col sm:flex-row gap-3">
        <button type="submit" class="flex-1 inline-flex items-center justify-center gap-2 bg-gradient-to-r from-brand-500 to-purple-600 hover:from-brand-600 hover:to-purple-700 text-white font-semibold py-3 px-6 rounded-xl shadow-lg shadow-brand-500/25 transition-all">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M19.916 4.626a.75.75 0 01.208 1.04l-9 13.5a.75.75 0 01-1.154.114l-6-6a.75.75 0 011.06-1.06l5.353 5.353 8.493-12.739a.75.75 0 011.04-.208z" clip-rule="evenodd"/></svg>
          {% if form.instance.pk %}Update Post{% else %}Publish Post{% endif %}
        </button>
        <a href="{% url 'post_list' %}" class="inline-flex items-center justify-center gap-2 px-6 py-3 text-gray-600 dark:text-gray-400 font-medium bg-gray-100 dark:bg-gray-800 rounded-xl hover:bg-gray-200 dark:hover:bg-gray-700 transition-all">
          Cancel
        </a>
      </div>
    </form>
  </div>
</div>
{% endblock %}
