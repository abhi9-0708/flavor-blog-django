{% extends 'base.html' %}
{% block title %}Saved Posts â€” Flavor Blog{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
  <div class="flex items-center gap-3 mb-8">
    <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-brand-500 to-purple-600 flex items-center justify-center">
      <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M6.32 2.577a49.255 49.255 0 0111.36 0c1.497.174 2.57 1.46 2.57 2.93V21a.75.75 0 01-1.085.67L12 18.089l-7.165 3.583A.75.75 0 013.75 21V5.507c0-1.47 1.073-2.756 2.57-2.93z" clip-rule="evenodd"/></svg>
    </div>
    <div>
      <h1 class="text-2xl font-bold text-gray-900 dark:text-white">Saved Posts</h1>
      <p class="text-sm text-gray-500 dark:text-gray-400">Articles you've bookmarked for later.</p>
    </div>
  </div>

  {% if bookmarks %}
  <div class="space-y-4">
    {% for bookmark in bookmarks %}
    <a href="{{ bookmark.post.get_absolute_url }}" class="card-hover flex gap-5 bg-white dark:bg-gray-900 rounded-2xl border border-gray-100 dark:border-gray-800 p-5 group">
      {% if bookmark.post.featured_image %}
      <div class="flex-shrink-0 w-24 h-24 rounded-xl overflow-hidden">
        <img src="{{ bookmark.post.featured_image.url }}" alt="" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
      </div>
      {% else %}
      <div class="flex-shrink-0 w-24 h-24 rounded-xl bg-gradient-to-br from-brand-100 to-purple-100 dark:from-brand-900/30 dark:to-purple-900/30 flex items-center justify-center">
        <svg class="w-8 h-8 text-brand-300 dark:text-brand-700" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M4.125 3C3.089 3 2.25 3.84 2.25 4.875V18a3 3 0 003 3h12.75a3 3 0 003-3V4.875C21 3.839 20.16 3 19.125 3H4.125zM12 9.75a.75.75 0 000 1.5h1.5a.75.75 0 000-1.5H12zm-.75-2.25a.75.75 0 01.75-.75h1.5a.75.75 0 010 1.5H12a.75.75 0 01-.75-.75zM6 12.75a.75.75 0 000 1.5h7.5a.75.75 0 000-1.5H6z" clip-rule="evenodd"/></svg>
      </div>
      {% endif %}
      <div class="flex-1 min-w-0">
        <div class="flex items-center gap-2 mb-1">
          {% if bookmark.post.category %}
          <span class="text-xs font-semibold text-brand-500">{{ bookmark.post.category.name }}</span>
          {% endif %}
          {% if bookmark.post.access_level == 'premium' %}
          <span class="flex items-center gap-0.5 text-xs font-semibold text-amber-500">
            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z" clip-rule="evenodd"/></svg>
            Pro
          </span>
          {% endif %}
        </div>
        <h3 class="font-bold text-gray-900 dark:text-white group-hover:text-brand-500 transition-colors truncate">{{ bookmark.post.title }}</h3>
        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">{{ bookmark.post.author.username }} &middot; {{ bookmark.post.publish_date|date:"M d, Y" }} &middot; {{ bookmark.post.reading_time }} min read</p>
      </div>
      <div class="flex-shrink-0 self-center text-brand-500">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M6.32 2.577a49.255 49.255 0 0111.36 0c1.497.174 2.57 1.46 2.57 2.93V21a.75.75 0 01-1.085.67L12 18.089l-7.165 3.583A.75.75 0 013.75 21V5.507c0-1.47 1.073-2.756 2.57-2.93z" clip-rule="evenodd"/></svg>
      </div>
    </a>
    {% endfor %}
  </div>

  {% if is_paginated %}
  <nav class="mt-10 flex items-center justify-center gap-2">
    {% if page_obj.has_previous %}
    <a href="?page={{ page_obj.previous_page_number }}" class="px-4 py-2 text-sm font-medium text-gray-600 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-xl hover:bg-gray-50 transition-all">Previous</a>
    {% endif %}
    <span class="px-4 py-2 text-sm font-bold text-white bg-brand-500 rounded-xl">{{ page_obj.number }} / {{ page_obj.paginator.num_pages }}</span>
    {% if page_obj.has_next %}
    <a href="?page={{ page_obj.next_page_number }}" class="px-4 py-2 text-sm font-medium text-gray-600 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-xl hover:bg-gray-50 transition-all">Next</a>
    {% endif %}
  </nav>
  {% endif %}

  {% else %}
  <div class="text-center py-20">
    <div class="w-20 h-20 mx-auto mb-6 rounded-2xl bg-gray-100 dark:bg-gray-800 flex items-center justify-center">
      <svg class="w-10 h-10 text-gray-300 dark:text-gray-600" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M6.32 2.577a49.255 49.255 0 0111.36 0c1.497.174 2.57 1.46 2.57 2.93V21a.75.75 0 01-1.085.67L12 18.089l-7.165 3.583A.75.75 0 013.75 21V5.507c0-1.47 1.073-2.756 2.57-2.93z" clip-rule="evenodd"/></svg>
    </div>
    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">No saved posts yet</h3>
    <p class="text-gray-500 dark:text-gray-400 mb-6">Bookmark interesting articles to read them later.</p>
    <a href="{% url 'post_list' %}" class="inline-flex items-center gap-2 px-4 py-2 bg-brand-500 text-white rounded-xl font-medium hover:bg-brand-600 transition-all">
      Browse articles
    </a>
  </div>
  {% endif %}
</div>
{% endblock %}
